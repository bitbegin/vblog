(window.webpackJsonp=window.webpackJsonp||[]).push([[20],{389:function(e,t,a){"use strict";a.r(t);var o=a(5),n=Object(o.a)({},(function(){var e=this,t=e._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[t("h2",{attrs:{id:"red的bind函数"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#red的bind函数"}},[e._v("#")]),e._v(" Red的bind函数")]),e._v(" "),t("p",[t("img",{attrs:{src:"/2016-02-24-bind-in-red/bind.gif",alt:""}})]),e._v(" "),t("p",[t("code",[e._v("Red")]),e._v("中的"),t("code",[e._v("bind")]),e._v("函数是个比较有意思的东西，刚接触时一直没有看懂这是个什么玩意，不信你看：")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("code: [a + b]\nadd: function [a b] [\n    b: 12\n    do bind code 'a\n]\nprint add 34 10\n")])])]),t("p",[e._v("输出结果"),t("code",[e._v("46")]),e._v("。")]),e._v(" "),t("p",[e._v("起初看这段代码是一头雾水的，但是经过研究发现是这么回事：")]),e._v(" "),t("p",[t("code",[e._v("bind")]),e._v("的第一个参数为"),t("code",[e._v("block")]),e._v("，里面的符号可以重新绑定，第二个参数为绑定的上下文，分为两种情况。")]),e._v(" "),t("ul",[t("li",[e._v("符号"),t("code",[e._v("'symbol")]),e._v("：使用该符号"),t("code",[e._v("symbol")]),e._v("的上下文，告诉第一个参数"),t("code",[e._v("block")]),e._v("去哪个上下文绑定")]),e._v(" "),t("li",[t("code",[e._v("context")]),e._v(": 使用"),t("code",[e._v("context")]),e._v("定义的上下文")])]),e._v(" "),t("p",[e._v("我们再来看上面的例子：\n"),t("code",[e._v("add 34 10")]),e._v(" 后局部变量 状态"),t("code",[e._v("a = 34")]),e._v(" "),t("code",[e._v("b = 10")]),e._v("，继续执行"),t("code",[e._v("b: 12")]),e._v("，局部变量状态变为"),t("code",[e._v("a = 34")]),e._v(" "),t("code",[e._v("b = 12")]),e._v("，"),t("code",[e._v("bind code 'a")]),e._v("后，code中的"),t("code",[e._v("a")]),e._v("和"),t("code",[e._v("b")]),e._v("绑定到局部变量，而do会对block求值，所以返回"),t("code",[e._v("46")])]),e._v(" "),t("h3",{attrs:{id:"第二个参数为符号-symbol的例子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二个参数为符号-symbol的例子"}},[e._v("#")]),e._v(" 第二个参数为符号"),t("code",[e._v("'symbol")]),e._v("的例子")]),e._v(" "),t("p",[e._v("一个递归调用的例子")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("Red []\nforeach-leaf: func [word [word!] spec [block!] body [block!]][\n    \"Depth-first tree of blocks traversal iterator\"\n    bind body 'spec\n    while [not tail? spec][\n        either block? spec/1 [\n            foreach-leaf word spec/1 body\n        ][\n            set word spec/1\n            do body\n        ]\n        spec: next spec\n    ]\n]\n\ntotal: 0\nforeach-leaf 'i [1 2 [3 [4 5] 6] 7 [8]] [total: total + i]\n?? total\n")])])]),t("h3",{attrs:{id:"第二个参数为context的例子"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#第二个参数为context的例子"}},[e._v("#")]),e._v(" 第二个参数为"),t("code",[e._v("context")]),e._v("的例子")]),e._v(" "),t("div",{staticClass:"language- extra-class"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[e._v("ctx: context [a: 1 b: 2]\ndo bind [a + b] ctx\n")])])]),t("p",[e._v("有关"),t("code",[e._v("bind")]),e._v("用法的更为详细的解释看 "),t("a",{attrs:{href:"http://www.pat665.free.fr/doc/bind.html",target:"_blank",rel:"noopener noreferrer"}},[e._v("这里"),t("OutboundLink")],1)]),e._v(" "),t("Vssue",{attrs:{title:e.$title}})],1)}),[],!1,null,null,null);t.default=n.exports}}]);